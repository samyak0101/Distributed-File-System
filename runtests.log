('starting', 'build')

**********************************************************************

Test build
build project using make

**********************************************************************
Trying to build project using make
make
gcc server.o -o server udp.c
gcc -c -fpic mfs.c 
mfs.c: In function ‘MFS_Lookup’:
mfs.c:84:3: warning: format not a string literal and no format arguments [-Wformat-security]
   84 |   sprintf(msg.name, name);
      |   ^~~~~~~
mfs.c: In function ‘MFS_Write’:
mfs.c:157:3: warning: format not a string literal and no format arguments [-Wformat-security]
  157 |   sprintf(msg.buffer, buffer);
      |   ^~~~~~~
mfs.c: In function ‘MFS_Read’:
mfs.c:189:3: warning: format not a string literal and no format arguments [-Wformat-security]
  189 |   sprintf(msg.buffer, buffer);
      |   ^~~~~~~
mfs.c: In function ‘MFS_Creat’:
mfs.c:218:3: warning: format not a string literal and no format arguments [-Wformat-security]
  218 |   sprintf(msg.name, name);
      |   ^~~~~~~
mfs.c: In function ‘MFS_Unlink’:
mfs.c:250:3: warning: format not a string literal and no format arguments [-Wformat-security]
  250 |   sprintf(msg.name, name);
      |   ^~~~~~~
gcc -c -fpic udp.c
gcc -c -fpic server.c
gcc -shared -o libmfs.so mfs.o udp.o
gcc -L. -o client client.c -Wall libmfs.so


test build PASSED
 (build project using make)

('starting', 'shutdown')

**********************************************************************

Test shutdown
init server and client then call shutdown

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8202
/tmp/tmpCg0x4X/p/server 8202 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 8202
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs shutdown


test shutdown PASSED
 (init server and client then call shutdown)

('starting', 'creat')

**********************************************************************

Test creat
creat a file and check with lookup

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 7380
/tmp/tmpCg0x4X/p/server 7380 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 7380
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Creating with name: test
going to check lookup from creat!
parent inode dierct i is 4
Allocated inode : 1
Create done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs shutdown


test creat PASSED
 (creat a file and check with lookup)

('starting', 'write')

**********************************************************************

Test write
write then read one block

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 5614
/tmp/tmpCg0x4X/p/server 5614 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
Failure: MFS_Read returned failure inum=1 block=0


test write FAILED
 (write then read one block)
 MFS_Read returned failure inum=1 block=0

('starting', 'stat')

**********************************************************************

Test stat
stat a regular file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8121
/tmp/tmpCg0x4X/p/server 8121 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs stat
size of m: 96
type of data: 0
in mfs stat
size of m: 67108864
type of data: 1610612736
Failure: Stat gave wrong type


test stat FAILED
 (stat a regular file)
 Stat gave wrong type

('starting', 'overwrite')

**********************************************************************

Test overwrite
overwrite a block

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6226
/tmp/tmpCg0x4X/p/server 6226 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
Failure: MFS_Read returned failure inum=1 block=0


test overwrite FAILED
 (overwrite a block)
 MFS_Read returned failure inum=1 block=0

('starting', 'maxfile')

**********************************************************************

Test maxfile
write largest possible file

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6386
/tmp/tmpCg0x4X/p/server 6386 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
Failure: MFS_Read returned failure inum=1 block=0


test maxfile FAILED
 (write largest possible file)
 MFS_Read returned failure inum=1 block=0

('starting', 'maxfile2')

**********************************************************************

Test maxfile2
write more blocks than possible

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9454
/tmp/tmpCg0x4X/p/server 9454 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
31
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs creat
read 8 bytes
response of creat: 1
write more than need
in mfs creat
read 8 bytes
response of creat: 1
Failure: MFS_Write should fail on inalid block number


test maxfile2 FAILED
 (write more blocks than possible)
 MFS_Write should fail on inalid block number

('starting', 'dir1')

**********************************************************************

Test dir1
check root for dot entries

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 5854
/tmp/tmpCg0x4X/p/server 5854 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 5854
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs lookup
read 8 bytes
return of lookup: 0
in mfs lookup
read 8 bytes
return of lookup: 0
in mfs shutdown


test dir1 PASSED
 (check root for dot entries)

('starting', 'dir2')

**********************************************************************

Test dir2
create a new directory and check it

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8144
/tmp/tmpCg0x4X/p/server 8144 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs lookup
read 8 bytes
return of lookup: -2
Failure: MFS_Lookup returned failure inum=1 name='.'


test dir2 FAILED
 (create a new directory and check it)
 MFS_Lookup returned failure inum=1 name='.'

('starting', 'baddir')

**********************************************************************

Test baddir
try to create a file with a file parent inode

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 8772
/tmp/tmpCg0x4X/p/server 8772 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 8772
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Creating with name: testdir
going to check lookup from creat!
parent inode dierct i is 4
Allocated inode : 1
Create done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 1
Creating with name: testfile
going to check lookup from creat!
INODE TYPE IS NOT A DIRECTORY BRO (FROM LOOKUP)
returning -1 from creat because the file was a file and not a directory!!!! 
Create done, it's -1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: -1
in mfs shutdown


test baddir PASSED
 (try to create a file with a file parent inode)

('starting', 'baddir2')

**********************************************************************

Test baddir2
try to lookup a file with a file parent inode

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 5799
/tmp/tmpCg0x4X/p/server 5799 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 5799
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Creating with name: testdir
going to check lookup from creat!
parent inode dierct i is 4
Allocated inode : 1
Create done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 1
INODE TYPE IS NOT A DIRECTORY BRO (FROM LOOKUP)
Lookup done, it's -2
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs lookup
read 8 bytes
return of lookup: -2
in mfs shutdown


test baddir2 PASSED
 (try to lookup a file with a file parent inode)

('starting', 'unlink')

**********************************************************************

Test unlink
unlink a file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6575
/tmp/tmpCg0x4X/p/server 6575 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 6575
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Creating with name: test
going to check lookup from creat!
parent inode dierct i is 4
Allocated inode : 1
Create done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling unlink
Trying to unlink a file called test
parent has the inum: 0
pinum is valid
Got the parent inode. It's size is: 96
entered second for loop
entered second for loop
entered second for loop
Found dir ent with name test in parent's directory entries
Reached, about to clear inode and some other stuff
attempting to clear 1
Got past clear_bit i think!
value of delbit is -16777216
Last 2 things to change!
Unlink done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's -1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: -1
in mfs shutdown


test unlink PASSED
 (unlink a file)

('starting', 'unlink2')

**********************************************************************

Test unlink2
unlink a directory

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9942
/tmp/tmpCg0x4X/p/server 9942 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 9942
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Creating with name: test
going to check lookup from creat!
parent inode dierct i is 4
Allocated inode : 1
here
Create done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's 1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling unlink
Trying to unlink a file called test
parent has the inum: 0
pinum is valid
Got the parent inode. It's size is: 96
entered second for loop
entered second for loop
entered second for loop
Found dir ent with name test in parent's directory entries
Reached, about to clear inode and some other stuff
attempting to clear 1
Got past clear_bit i think!
value of delbit is -16777216
Last 2 things to change!
Unlink done, it's 0
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
 message pinum: 0
Lookup done, it's -1
server:: reply
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: -1
in mfs shutdown


test unlink2 PASSED
 (unlink a directory)

('starting', 'empty')

**********************************************************************

Test empty
unlink a non-empty directory

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9883
/tmp/tmpCg0x4X/p/server 9883 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: -1
Failure: MFS_Creat returned failure inum=1 type=1 name='testfile'


test empty FAILED
 (unlink a non-empty directory)
 MFS_Creat returned failure inum=1 type=1 name='testfile'

('starting', 'name')

**********************************************************************

Test name
name too long

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9155
/tmp/tmpCg0x4X/p/server 9155 /home/samyak/cs537/p4/osp4/test.img
Listening for connections on port 9155
inodes 0
max inum: 32
server:: waiting...
server:: read message [size:1000 contents:()]
Calling shutdown
in mfs creat
in mfs shutdown


test name PASSED
 (name too long)

('starting', 'persist')

**********************************************************************

Test persist
restart server after creating a file

**********************************************************************
total blocks        36
  inodes            32 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 9603
/tmp/tmpCg0x4X/p/server 9603 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 1
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: 1
Failure: MFS_Read returned failure inum=1 block=0


test persist FAILED
 (restart server after creating a file)
 MFS_Read returned failure inum=1 block=0

('starting', 'bigdir')

**********************************************************************

Test bigdir
create a directory with 126 files

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 5322
/tmp/tmpCg0x4X/p/server 5322 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: -1
Failure: MFS_Creat returned failure inum=1 type=1 name='0'


test bigdir FAILED
 (create a directory with 126 files)
 MFS_Creat returned failure inum=1 type=1 name='0'

('starting', 'deep')

**********************************************************************

Test deep
create many deeply nested directories

**********************************************************************
total blocks        39
  inodes            128 [size of each: 128]
  data blocks       32
layout details
  inode bitmap address/len 1 [1]
  data bitmap address/len  2 [1]
Starting server on port 6508
/tmp/tmpCg0x4X/p/server 6508 /home/samyak/cs537/p4/osp4/test.img
in mfs creat
read 8 bytes
response of creat: 0
in mfs lookup
read 8 bytes
return of lookup: 1
in mfs creat
read 8 bytes
response of creat: -1
Failure: MFS_Creat returned failure inum=1 type=0 name='0'


test deep FAILED
 (create many deeply nested directories)
 MFS_Creat returned failure inum=1 type=0 name='0'

**********************************************************************
Summary:
test build PASSED
 (build project using make)

test shutdown PASSED
 (init server and client then call shutdown)

test creat PASSED
 (creat a file and check with lookup)

test write FAILED
 (write then read one block)
 MFS_Read returned failure inum=1 block=0

test stat FAILED
 (stat a regular file)
 Stat gave wrong type

test overwrite FAILED
 (overwrite a block)
 MFS_Read returned failure inum=1 block=0

test maxfile FAILED
 (write largest possible file)
 MFS_Read returned failure inum=1 block=0

test maxfile2 FAILED
 (write more blocks than possible)
 MFS_Write should fail on inalid block number

test dir1 PASSED
 (check root for dot entries)

test dir2 FAILED
 (create a new directory and check it)
 MFS_Lookup returned failure inum=1 name='.'

test baddir PASSED
 (try to create a file with a file parent inode)

test baddir2 PASSED
 (try to lookup a file with a file parent inode)

test unlink PASSED
 (unlink a file)

test unlink2 PASSED
 (unlink a directory)

test empty FAILED
 (unlink a non-empty directory)
 MFS_Creat returned failure inum=1 type=1 name='testfile'

test name PASSED
 (name too long)

test persist FAILED
 (restart server after creating a file)
 MFS_Read returned failure inum=1 block=0

test bigdir FAILED
 (create a directory with 126 files)
 MFS_Creat returned failure inum=1 type=1 name='0'

test deep FAILED
 (create many deeply nested directories)
 MFS_Creat returned failure inum=1 type=0 name='0'

Passed 9 of 19 tests.
Overall 9 of 19
